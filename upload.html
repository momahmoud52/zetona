<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>رفع البيانات - زتونة المنهج</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* General styles */
        body {
            font-family: 'Cairo', sans-serif;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            color: #333;
            animation: fadeIn 1s ease-in-out;
            position: relative;
            background-color: #f9f9f9;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Container styles */
        .upload-container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 30px;
            background-color: #ffffff;
            margin: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            opacity: 0;
            animation: fadeUp 1.5s forwards;
            max-width: 800px;
            width: 100%;
            margin: 20px auto;
        }

        @keyframes fadeUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .upload-container h3 {
            font-size: 1.5rem;
            margin-bottom: 20px;
        }

        .drop-area {
            width: 100%;
            height: 200px;
            border: 2px dashed #007bff;
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            font-size: 1.2rem;
            color: #007bff;
            transition: background-color 0.3s ease, transform 0.3s ease;
        }

        .drop-area:hover {
            cursor: pointer;
            background-color: #e9ecef;
            transform: scale(1.05);
        }

        .file-input {
            display: none;
        }

        .file-selected {
            color: #28a745;
            font-weight: bold;
        }

        footer {
            text-align: center;
            margin-top: 20px;
            font-size: 1rem;
            color: #777;
        }

        .home-link, .about-link {
            text-decoration: none;
            color: #007bff;
            font-size: 1.2rem;
            margin-top: 20px;
            display: block;
            transition: color 0.3s ease, transform 0.3s ease;
        }

        .home-link:hover, .about-link:hover {
            color: #28a745;
            transform: scale(1.1);
        }

        .motivational-quote {
            font-size: 1.6rem;
            font-family: 'Tajawal', sans-serif;
            font-weight: bold;
            color: #006400;
            margin-top: 20px;
            text-align: center;
            transition: opacity 1s ease-in-out;
        }

        #result-button {
            display: none;
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 1.2rem;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        #result-button:hover {
            background-color: #28a745;
        }

        /* Media Queries for responsiveness */
        @media (max-width: 1024px) {
            .upload-container {
                padding: 25px;
            }

            .drop-area {
                height: 180px;
                font-size: 1.1rem;
            }

            .motivational-quote {
                font-size: 1.4rem;
            }

            .home-link, .about-link {
                font-size: 1.1rem;
            }

            #result-button {
                font-size: 1.1rem;
            }
        }

        @media (max-width: 768px) {
            .upload-container {
                padding: 20px;
            }

            .drop-area {
                height: 150px;
                font-size: 1rem;
            }

            .motivational-quote {
                font-size: 1.3rem;
            }

            .home-link, .about-link {
                font-size: 1rem;
            }

            #result-button {
                font-size: 1rem;
            }
        }

        @media (max-width: 480px) {
            .upload-container {
                padding: 15px;
            }

            .drop-area {
                height: 120px;
                font-size: 0.9rem;
            }

            .motivational-quote {
                font-size: 1.2rem;
            }

            .home-link, .about-link {
                font-size: 0.9rem;
            }

            #result-button {
                font-size: 1rem;
            }
        }

        /* For mobile phones in landscape orientation */
        @media (max-width: 1024px) and (orientation: landscape) {
            .upload-container {
                padding: 20px;
            }

            .drop-area {
                height: 160px;
                font-size: 1.1rem;
            }

            .motivational-quote {
                font-size: 1.3rem;
            }

            .home-link, .about-link {
                font-size: 1.1rem;
            }
        }
    </style>
</head>
<body>
    <div class="watermark">زتونة المنهج</div>

    <div class="upload-container">
        <h3>رفع البيانات</h3>
        <p>يمكنك الآن رفع ملفك بسهولة من خلال السحب والإفلات أو اختيار الملف من جهازك.</p>
        <div class="drop-area" id="drop-area">
            <p>اسحب الملف هنا أو اضغط لاختيار ملف</p>
            <input type="file" class="file-input" id="file-input" />
        </div>
        <a href="#" class="about-link" id="about-link">عن الموقع</a>
        <a href="#" class="home-link" id="reload-link">هل تريد إجراء عملية أخرى؟</a>
    </div>

    <footer>
        &copy; 2024 زتونة المنهج - جميع الحقوق محفوظة.
    </footer>

    <div class="motivational-quote" id="quote">ابدأ الآن وحقق النجاح!</div>

    <script>
        // Toggle about section visibility
        document.getElementById('about-link').addEventListener('click', function(event) {
            event.preventDefault();
            const aboutSection = document.getElementById('about-section');
            aboutSection.style.display = (aboutSection.style.display === 'none' || aboutSection.style.display === '') ? 'block' : 'none';
        });

        // Reload page when clicking "هل تريد إجراء عملية أخرى؟"
        document.getElementById('reload-link').addEventListener('click', function(event) {
            event.preventDefault();
            window.location.reload();
        });

        // Detect language
        function detectLanguage(text) {
            return /[\u0600-\u06FF]/.test(text) ? 'ar' : 'other';
        }

        // Google Cloud API Key (replace with your actual API key)
        const GOOGLE_CLOUD_VISION_API_KEY = 'AIzaSyDzmuTRn4jSQMwa3koFslHgYYFnzipqgdU';

        function analyzeImage(file) {
            const formData = new FormData();
            formData.append('file', file);

            const reader = new FileReader();
            reader.onload = function() {
                const base64Image = reader.result.split(',')[1];
                fetch('https://vision.googleapis.com/v1/images:annotate?key=' + GOOGLE_CLOUD_VISION_API_KEY, {
                    method: 'POST',
                    body: JSON.stringify({
                        requests: [
                            {
                                image: { content: base64Image },
                                features: [{ type: 'TEXT_DETECTION', maxResults: 1 }]
                            }
                        ]
                    })
                })
                .then(response => response.json())
                .then(data => {
                    const text = data.responses[0].fullTextAnnotation.text;
                    sessionStorage.setItem("extractedText", text);
                    document.getElementById('result-button').style.display = 'block';
                })
                .catch(error => console.error('Error in image analysis:', error));
            };
            reader.readAsDataURL(file);
        }

        // Handle file upload
        const dropArea = document.getElementById('drop-area');
        const fileInput = document.getElementById('file-input');

        dropArea.addEventListener('click', function() {
            fileInput.click();
        });

        fileInput.addEventListener('change', function(event) {
            const file = event.target.files[0];
            const fileName = file.name;

            if (file.type.startsWith('image/')) {
                analyzeImage(file);
            } else if (file.type === 'application/pdf' || file.type === 'text/plain') {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const text = e.target.result;
                    if (detectLanguage(text) === 'ar') {
                        console.log("النص باللغة العربية:", text);
                    }
                    sessionStorage.setItem("extractedText", text);
                    document.getElementById('result-button').style.display = 'block';
                };
                reader.readAsText(file);
            }

            dropArea.innerHTML = `<p class="file-selected">تم اختيار الملف: ${fileName}</p>`;
        });

        // Motivational quotes rotation
        const quotes = [
            "ابدأ الآن وحقق النجاح!",
            "التعلم هو الطريق إلى المستقبل.",
            "كل يوم هو فرصة جديدة للنمو.",
            "لا تستسلم أبداً، المستقبل لك!",
            "استمر في المحاولة، النجاح قريب!",
            "كل لحظة تعلم تقربك من هدفك.",
            "إرادتك هي مفتاح النجاح."
        ];
        let quoteIndex = 0;
        setInterval(() => {
            const quoteElement = document.getElementById('quote');
            quoteElement.style.opacity = 0;
            setTimeout(() => {
                quoteElement.innerHTML = quotes[quoteIndex];
                quoteElement.style.opacity = 1;
                quoteIndex = (quoteIndex + 1) % quotes.length;
            }, 500);
        }, 5000);
    </script>
</body>
</html>
